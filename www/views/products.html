<div data-options="dxView : { name: 'products', title: 'Sản Phẩm', secure: true } " >
	<!-- <div data-bind="dxCommand: { id: 'sort', action: showSortOptions }" ></div> -->
	<div data-bind="dxCommand: { id: 'refresh', icon: 'refresh', action: function() { doLoadProducts(); } }" ></div>
	<div id="contentview" data-options="dxContent : { targetPlaceholder: 'content' } " >
		<div data-bind="dxActionSheet: {
		dataSource: dropDownMenuData,
		visible: actionSheetVisible,
		title: 'Sắp xếp sản phẩm theo thời gian',
		cancelText: 'Bỏ qua'
		}"></div>
		<div id="topbar">
			<table class="products-list" style="width:100%">
				<tbody>
					<tr>
						<td width="100%"><div id="searchBox"
						data-bind="dxTextBox: {
						value: searchString,
						placeholder: 'Tìm sản phẩm theo tên',
						valueChangeAction: doLoadProducts}"></div></td>
						<td data-bind="dxButton: {icon:'find', clickAction:doLoadProducts}"></td>
					</tr>
				</tbody>
			</table>
			<div>
				<span>Số lượt up còn lại: Tích lũy: </span>
				<span style="font-weight: bold;" data-bind="text: score"></span>
				<span>Tặng: </span>
				<span style="font-weight: bold;" data-bind="text: autoscore"></span>
			</div>
		</div>
		<div id="productsList" data-bind="dxList: { dataSource: productsDataSource,
		pullRefreshEnabled: true,
		autoPagingEnabled: true,
		pageLoadingAction: function() { loadNextProducts(); },
		pullRefreshAction: function() { doLoadProducts(); },
		pulledDownText: 'Thả để tải lại...',
		pullingDownText: 'Kéo để tải lại...',
		nextButtonText: 'Tải tiếp ...',
		pageLoadingText: 'Đang tải ...' }">
			<div data-options="dxTemplate : { name: 'item' }">
				<div class="products-info">
					<table class="product-table">

						<tbody>
							<tr>
								<td width="100%" colspan="4" style="white-space: pre-wrap; word-wrap: break-word; text-align: left; font-weight: bold;" data-bind="text: name"></td>
							</tr>
							<tr>
								<td rowspan="4" valign=top><img class="product-thumbnail lazy" data-bind="attr: { src: thumbnail }"><img></td>
							</tr>
							<tr>
								<!-- <td width="auto" class="transparent-button" data-bind="dxButton: {iconSrc: 'images/moneyicon.png'}"></td> -->
								<td style="font-size: smaller;" class="product-price" data-bind="text: price + ' đ'"></td>
							</tr>
							<tr>
								<!-- <td width="auto" class="transparent-button" data-bind="dxButton: {iconSrc: 'images/weight.png'}"></td> -->
								<td style="font-size: smaller;" data-bind="text: weight + ' g'"></td>
							</tr>
							<!-- ko if:displayUpProductDate -->
							<tr>
								<td style="font-size: smaller; width:100%; white-space: pre-wrap; word-wrap: break-word; text-align: left;" data-bind="text: 'Up gần nhất: ' + upProductDateDisplay"></td>
							</tr>
							<!-- /ko -->
						</tbody>
					</table>
				</div>
				<table class="products-list" style="width:100%; margin-top: 10px;">
					<tbody>
						<tr>
							<td style="float: left;" data-bind="dxButton: {icon:'edit', disabled: noEdit, clickAction: function(e) {edit(e, $data);}}"></td>
							<td width="10px"></td>
							<!-- ko if:stockAvailability -->
							<td style="float: right;" data-bind="dxButton: {text:'Báo hết hàng', clickAction: function(e) { changeStockStatus(e,$data); } }"></td>
							<!-- /ko -->
							<!-- ko ifnot:stockAvailability -->
							<td style="float: right;" data-bind="dxButton: {text:'Báo còn hàng', clickAction: function(e) { changeStockStatus(e,$data); } }"></td>
							<!-- /ko -->
							<td width="10px"></td>
							<td style="float: right;" data-bind="dxButton: {text:'Up ngay', disabled: noUp, clickAction: function() {upProduct(id);}}"></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div data-bind="dxPopup:{visible:popupEditVisible, fullScreen:true, title:'Chỉnh sửa sản phẩm'}">
			<div data-options="dxTemplate:{name: 'content'}">
				<div class="dx-fieldset">
					<div class="dx-field">
						<div class="dx-field-label">
							Tên:
						</div>
						<div class="dx-field-value" data-bind="dxTextBox: { value: editName}"></div>
					</div>
					<div class="dx-field">
						<div class="dx-field-label">
							Giá:
						</div>
						<div id="priceBox" class="dx-field-value" data-bind="dxTextBox: { value: editPrice, keyUpAction: updatePriceFormat, valueUpdateEvent: 'keyup'}"></div>
					</div>
					<div class="dx-field">
						<div class="dx-field-label">
							Khối lượng:
						</div>
						<div id="weightBox" class="dx-field-value" data-bind="dxTextBox: { value: editWeight, valueChangeAction: updateWeightFormat}"></div>
					</div>
				</div>
				<div class="default-button" data-bind="dxButton: { text: 'Sửa', clickAction: changeProductProperties, icon:'edit' }"></div>
				<div class="default-button" data-bind="dxButton: { text: 'Huỷ', clickAction: hideEditPopup, icon:'close' }"></div>
			</div>
		</div>
		<div data-bind="dxLoadPanel:{message: '', visible: loadPanelVisible }"></div>
	</div>
</div>
